apiVersion: infra.homecluster.dev/v1alpha1
kind: Group
metadata:
  name: unhealthy-group
  namespace: homelab-autoscaler-system
spec:
  name: unhealthy-group
  maxSize: 10
  nodeSelector:
    test: unhealthy
  pricing:
    hourlyRate: "1.00"
    monthlyRate: "500.00"
---
apiVersion: infra.homecluster.dev/v1alpha1
kind: Node
metadata:
  name: unhealthy-group-unhealthy-node
  namespace: homelab-autoscaler-system
  labels:
    group: unhealthy-group
spec:
  kubernetesNodeName: unhealthy-node
  healthcheckPeriod: 1
  startupPodSpec:
    image: busybox:latest
    command:
      - /bin/sh
    args:
      - -c
      - echo startup
  shutdownPodSpec:
    image: busybox:latest
    command:
      - /bin/sh
    args:
      - -c
      - exit -1
  healthcheckPodSpec:
    image: busybox:latest
    command:
      - /bin/sh
    args:
      - -c
      - exit 1